```python
import requests
from aiogram import Bot, Dispatcher, types
from aiogram.utils import executor

TOKEN = "8205786674:AAF0JYnQBU7F6-hXQ0eqjYoJZyxAFhlxKsA"

bot = Bot(token=TOKEN)
dp = Dispatcher(bot)

def search_music(query):
    url = "https://itunes.apple.com/search"
    params = {"term": query, "entity": "song", "limit": 5}
    return requests.get(url, params=params).json().get("results", [])

# –ö–æ–º–∞–Ω–¥–∞ /start
@dp.message_handler(commands=['start'])
async def cmd_start(message: types.Message):
    await message.answer("–ü—Ä–∏–≤–µ—Ç! –ù–∞–ø–∏—à–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–µ–∫–∞ –∏–ª–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è, –∏ —è –Ω–∞–π–¥—É –º—É–∑—ã–∫—É üéµ")

# –õ—é–±–æ–π —Ç–µ–∫—Å—Ç
@dp.message_handler()
async def music_search(message: types.Message):
    tracks = search_music(message.text)
    if not tracks:
        await message.answer("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ üòî")
        return

    text = "üé∂ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:\n\n"
    for t in tracks:
        text += f"üéµ {t['trackName']}\nüë§ {t['artistName']}\n{t['previewUrl']}\n\n"

    await message.answer(text)

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
if __name__ == "__main__":
    executor.start_polling(dp, skip_updates=True)
```

### –ü–æ–¥–∫–ª—é—á–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

`import requests from aiogram import Bot, Dispatcher, types`

`requests` ‚Äî —á—Ç–æ–±—ã —Å—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å–∞–π—Ç –∏ —Å–ø—Ä–æ—Å–∏—Ç—å –º—É–∑—ã–∫—É
    
`aiogram` ‚Äî —á—Ç–æ–±—ã –±–æ—Ç —É–º–µ–ª —á–∏—Ç–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
    

---
### –¢–æ–∫–µ–Ω

`TOKEN = "8205786674:AAF0JYnQBU7F6-hXQ0eqjYoJZyxAFhlxKsA"`

–≠—Ç–æ –º–æ–π —Ç–æ–∫–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞
Telegram –ø–æ –Ω–µ–º—É –ø–æ–Ω–∏–º–∞–µ—Ç, –∫–∞–∫–æ–π –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç.

---
### –°–æ–∑–¥–∞—ë–º –±–æ—Ç–∞

`bot = Bot(token=TOKEN) dp = Dispatcher()`

`bot` ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
    
`dp` ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
    
---

### –§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞

`def search_music(query):`

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è:
–ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—Å—Ç (—á—Ç–æ —Ç—ã –Ω–∞–ø–∏—Å–∞–ª)
–∏—â–µ—Ç –º—É–∑—ã–∫—É
–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Å–Ω–∏
    
---
`params = {     "term": query,     "entity": "song",     "limit": 5 }`

–ó–¥–µ—Å—å –º—ã –≥–æ–≤–æ—Ä–∏–º —Å–∞–π—Ç—É:

–∏—Å–∫–∞—Ç—å –ø–æ —ç—Ç–æ–º—É —Ç–µ–∫—Å—Ç—É
    
–∏—Å–∫–∞—Ç—å –∏–º–µ–Ω–Ω–æ –ø–µ—Å–Ω–∏
    
–≤–µ—Ä–Ω—É—Ç—å –Ω–µ –±–æ–ª—å—à–µ 5 —à—Ç—É–∫
    
---

`return requests.get(url, params=params).json()["results"]`

–ü—Ä–æ—â–µ:

 ¬´–°—Ö–æ–¥–∏ –Ω–∞ —Å–∞–π—Ç ‚Üí –≤–æ–∑—å–º–∏ –æ—Ç–≤–µ—Ç ‚Üí –≤–µ—Ä–Ω–∏ –ø–µ—Å–Ω–∏¬ª

---
### –ö–æ–≥–¥–∞ —Ç—ã –ø–∏—à–µ—à—å —Å–æ–æ–±—â–µ–Ω–∏–µ

`@dp.message() async def music(message):`

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:

¬´–ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –Ω–∞–ø–∏—à–µ—Ç –±–æ—Ç—É ‚Äî –∑–∞–ø—É—Å–∫–∞–π —ç—Ç–æ—Ç –∫–æ–¥¬ª

---

`tracks = search_music(message.text)`

–ò—â–µ—Ç –ø–æ –Ω–µ–º—É –º—É–∑—ã–∫—É

---
### –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞—à–ª–∏

`if not tracks:     await message.answer("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ üòî")`

–ë–æ—Ç —á–µ—Å—Ç–Ω–æ —Å–∫–∞–∂–µ—Ç, —á—Ç–æ –ø–µ—Å–µ–Ω –Ω–µ—Ç

---

### –ì–æ—Ç–æ–≤–∏–º –æ—Ç–≤–µ—Ç

`text = "üé∂ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:\n\n"`

–°–æ–∑–¥–∞—ë–º —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–∏–º

---

`for t in tracks:`

–ë–µ—Ä—ë–º –∫–∞–∂–¥—É—é –Ω–∞–π–¥–µ–Ω–Ω—É—é –ø–µ—Å–Ω—é

---

`text += (     f"üéµ {t['trackName']}\n"     f"üë§ {t['artistName']}\n"     f"{t['previewUrl']}\n\n" )`

–î–æ–±–∞–≤–ª—è–µ–º:

–Ω–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Å–Ω–∏
    
–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
    
---
### –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ

`await message.answer(text)`

–ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≥–æ—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç —Ç–µ–±–µ

---
### –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

`dp.run_polling(bot)`

–±–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è