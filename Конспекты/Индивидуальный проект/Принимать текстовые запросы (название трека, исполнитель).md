```python
import requests
from telegram import Update
from telegram.ext import ApplicationBuilder, CommandHandler, MessageHandler, filters, ContextTypes

# –ü–æ–∏—Å–∫–æ–≤–∏–∫ –º—É–∑—ã–∫–∏
def search_music(query, limit=5):
    params = {'term': query, 'country':'US','media':'music','limit':limit}
    try:
        r = requests.get("https://itunes.apple.com/search", params=params)
        r.raise_for_status()
    except requests.RequestException:
        return []
    return [{
        'track': i.get('trackName'),
        'artist': i.get('artistName'),
        'album': i.get('collectionName'),
        'preview': i.get('previewUrl')
    } for i in r.json().get('results', [])]

# –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text("–ü—Ä–∏–≤–µ—Ç! –û—Ç–ø—Ä–∞–≤—å –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Å–Ω–∏ –∏–ª–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è.")

async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.message.text
    tracks = search_music(query)
    if not tracks:
        await update.message.reply_text("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ üò¢")
        return
    reply = "\n\n".join([f"{t['track']} ‚Äî {t['artist']} ({t['album']})\n{t['preview']}" for t in tracks])
    await update.message.reply_text(reply)

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
if __name__ == "__main__":
    TOKEN = "8205786674:AAF0JYnQBU7F6-hXQ0eqjYoJZyxAFhlxKsA"
    app = ApplicationBuilder().token(TOKEN).build()
    app.add_handler(CommandHandler("start", start))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))
    app.run_polling()
```


–ß—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç
–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
    - –¢—ã –∑–∞–ø—É—Å–∫–∞–µ—à—å –ø—Ä–æ–≥—Ä–∞–º–º—É —Å —Ç–≤–æ–∏–º —Ç–µ–ª–µ–≥—Ä–∞–º-—Ç–æ–∫–µ–Ω–æ–º.
    - –ë–æ—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Telegram –∏ –∂–¥—ë—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
        
–ö–æ–º–∞–Ω–¥–∞ `/start`
    - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç `/start`.
    - –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç: ¬´–ü—Ä–∏–≤–µ—Ç! –û—Ç–ø—Ä–∞–≤—å –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Å–Ω–∏ –∏–ª–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è.¬ª
        
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç
    - –ù–∞–ø—Ä–∏–º–µ—Ä: ¬´Imagine Dragons¬ª.
    - –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –µ–≥–æ –≤ —Ñ—É–Ω–∫—Ü–∏—é `search_music`.
        
–ü–æ–∏—Å–∫ –º—É–∑—ã–∫–∏ —á–µ—Ä–µ–∑ iTunes API
    - –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä iTunes, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ —Ç—Ä–µ–∫–∏ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é.
    - –°–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–µ—Å–µ–Ω —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π: –Ω–∞–∑–≤–∞–Ω–∏–µ, –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å, –∞–ª—å–±–æ–º, —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–µ–≤—å—é.
        
–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞
    - –ë–æ—Ç –±–µ—Ä—ë—Ç –∫–∞–∂–¥—ã–π —Ç—Ä–µ–∫ –∏ –¥–µ–ª–∞–µ—Ç —Ç–µ–∫—Å—Ç:
        `–ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Å–Ω–∏ ‚Äî –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å (–ê–ª—å–±–æ–º) –°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ`
    - –°–∫–ª–∞–¥—ã–≤–∞–µ—Ç –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Ç—Ä–µ–∫–∏ –≤ –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ.

–û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    - –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –Ω–∞–π–¥–µ–Ω–Ω—ã–º–∏ —Ç—Ä–µ–∫–∞–º–∏ –∏ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –∏—Ö –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ.

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
    - –ë–æ—Ç –ø–∏—à–µ—Ç: ¬´–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ ((((¬ª

### –ß—Ç–æ –∂–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –º–æ–µ–º –∫–æ–¥–µ:

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω—É–∂–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

`import requests from telegram import Update from telegram.ext import ApplicationBuilder, CommandHandler, MessageHandler, filters, ContextTypes`

- **`requests`**: –Ω—É–∂–Ω–∞, —á—Ç–æ–±—ã –±–æ—Ç –º–æ–≥ —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å –º—É–∑—ã–∫—É —É iTunes —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.
    
- **`telegram` –∏ `telegram.ext`**: –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞—é—Ç –±–æ—Ç–∞ –≤–æ–∑–º–æ–∂–Ω—ã–º, —á—Ç–æ–±—ã –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ—Ç–≤–µ—Ç—ã.
### –ü–æ–∏—Å–∫ –º—É–∑—ã–∫–∏

`def search_music(query, limit=5):     params = {'term': query, 'country':'US','media':'music','limit':limit}     ...`

`query ‚Äî —ç—Ç–æ —Ç–æ, —á—Ç–æ –Ω–∞–ø–∏—Å–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.
    
–ë–æ—Ç —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è iTunes, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –ø–µ—Å–Ω–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —ç—Ç–∏–º —Ç–µ–∫—Å—Ç–æ–º.
    
–ß–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –±–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–µ—Å–µ–Ω —Å iTunes.
    
–ò–∑ –∫–∞–∂–¥–æ–π –ø–µ—Å–Ω–∏ –±–æ—Ç –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω–æ–µ:
- –ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Å–Ω–∏
- –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
- –ê–ª—å–±–æ–º

–ò —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç –≤—Å—ë —ç—Ç–æ –≤ —Å–ø–∏—Å–æ–∫. –ï—Å–ª–∏ –ø–µ—Å–Ω–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫.

---

### –ö–æ–º–∞–Ω–¥–∞ /start

`async def start(update, context):     await update.message.reply_text("–ü—Ä–∏–≤–µ—Ç! –û—Ç–ø—Ä–∞–≤—å –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Å–Ω–∏ –∏–ª–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è.")`

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç /start, –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º.
    
–°–º—ã—Å–ª: –æ–±—ä—è—Å–Ω–∏—Ç—å, —á—Ç–æ –±–æ—Ç —É–º–µ–µ—Ç –¥–µ–ª–∞—Ç—å ‚Äî –∏—Å–∫–∞—Ç—å –º—É–∑—ã–∫—É –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –ø–µ—Å–Ω–∏ –∏–ª–∏ –∏–º–µ–Ω–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è.
    

---

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –ª—é–±–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

`async def handle_message(update, context):     query = update.message.text     tracks = search_music(query)     ...`

–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –±–æ—Ç:
1. –ë–µ—Ä—ë—Ç —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–ø–∏—Å–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.
2. –ü–µ—Ä–µ–¥–∞—ë—Ç –µ–≥–æ –≤ —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–∏—Å–∫–∞ –º—É–∑—ã–∫–∏ (`search_music`).
3. –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç—Ä–µ–∫–æ–≤.
4. –ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç–æ–π ‚Äî –ø–∏—à–µ—Ç ¬´–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ üò¢¬ª.
5. –ï—Å–ª–∏ —Ç—Ä–µ–∫–∏ –µ—Å—Ç—å ‚Äî —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∫—Ä–∞—Å–∏–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –≥–¥–µ –∫–∞–∂–¥–∞—è –ø–µ—Å–Ω—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–µ–∫–∞
- –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
- –ê–ª—å–±–æ–º
1. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
---

### –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

`app = ApplicationBuilder().token(TOKEN).build() app.add_handler(CommandHandler("start", start)) app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message)) app.run_polling()`

–°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞: –ø–æ–¥–∫–ª—é—á–∞–µ–º —Ç–æ–∫–µ–Ω, —á—Ç–æ–±—ã Telegram –∑–Ω–∞–ª, —á—Ç–æ —ç—Ç–æ —Ç–≤–æ–π –±–æ—Ç.
    
–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥:
    - `/start` ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `start`
    - –ª—é–±–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `handle_message`

`run_polling()`: –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ü–∏–∫–ª, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Å–ª—É—à–∞–µ—Ç –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –Ω–∏—Ö.
